## 初始化最小集群
### 安装软件包
```
dnf install -y centos-release-ceph-reef
dnf install -y cephadm
```
### 初始化集群
```
cephadm bootstrap \
--mon-ip 192.168.159.11 \
--cluster-network 10.1.59.0/24
```
### 查看密码
在安装好之后，在终端界面可以看到`ceph`登录的方式和账号密码
![1763897078397.png](http://185.238.249.26:7791/i/2025/11/23/6922eef7683e3.png)
### 登录网页
由于主机没有设置泛域名解析，因此使用IP进行登录
![1763897224281.png](http://185.238.249.26:7791/i/2025/11/23/6922ef8dcac04.png)
如下是登录网页之后的界面
![1763897287908.png](http://185.238.249.26:7791/i/2025/11/23/6922efc9d71fc.png)
## 添加主机
将node02和node03添加到集群
### 分发公钥到主机节点
```
ssh-copy-id -f -i /etc/ceph/ceph.pub root@node02
ssh-copy-id -f -i /etc/ceph/ceph.pub root@node03
```
### 将主机节点加入集群
```
cephadm shell
ceph orch host add node02 192.168.159.12
ceph orch host add node03 192.168.159.13
ceph orch apply mon 3
```
![1763897643102.png](http://185.238.249.26:7791/i/2025/11/23/6922f12c18818.png)
查看节点
![1763897740634.png](http://185.238.249.26:7791/i/2025/11/23/6922f199df1fb.png)
## 添加OSD
在三个主机添加一块16GiB的硬盘
![1763897963732.png](http://185.238.249.26:7791/i/2025/11/23/6922f26ca879b.png)
### 将硬盘加入集群
将主机1的新硬盘加入集群
```
cephadm shell
ceph orch daemon add osd node01:/dev/nvme0n2
```
![1763898104068.png](http://185.238.249.26:7791/i/2025/11/23/6922f2f939d27.png)
同理将主机2和主机3的新硬盘加入集群
```
cephadm shell
ceph orch daemon add osd node02:/dev/nvme0n2
ceph orch daemon add osd node03:/dev/nvme0n2
```
查看OSD
![1763898257073.png](http://185.238.249.26:7791/i/2025/11/23/6922f394431cf.png)




















