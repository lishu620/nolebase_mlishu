---
dg-publish: true
dg-home: false
author: mlishu
---
## 实验拓扑
![[Pasted image 20250918125225.png]]

## 实验配置
首先通过文本文件配置设备的接口IP和环回口IP
### 配置多区域OSPF
#### AR1
```
system
ospf 1 route-id 1.1.1.1
area 1
network 10.0.12.0 0.0.0.255
network 1.1.1.1 0.0.0.0
return
```
#### AR2
```
system
ospf 1 route-id 2.2.2.2
area 1
network 10.0.12.0 0.0.0.255
area 0
network 10.0.23.0 0.0.0.255
network 2.2.2.2 0.0.0.0
return
```
#### AR3
```
system
ospf 1 route-id 3.3.3.3
area 0
network 10.0.23.0 0.0.0.255
network 10.0.34.0 0.0.0.255
return
```
#### AR4
```
system
ospf 1 route-id 4.4.4.4
area 0
network 10.0.34.0 0.0.0.255
area 2
network 10.0.45.0 0.0.0.255
network 4.4.4.4 0.0.0.0
return
```
#### AR5
```
system
ospf 1 route-id 5.5.5.5
area 2
network 10.0.45.0 0.0.0.255
network 5.5.5.5 0.0.0.0
return
```

### 引入外部路由

在AR1中使用一下命令引入外部路由到OSPF进程

```
system
ospf 1
import-route direct
return
```

### 不同区域分析

未配置任何区域划分：

AR1的OSPF路由表：
![[Pasted image 20250918130618.png]]

AR2的OSPF路由表：
![[Pasted image 20250918132004.png]]

通过AR1引入的路由可以在路由表看到

AR3的OSPF路由表：
![[Pasted image 20250918132435.png]]

AR4的OSPF路由表：
![[Pasted image 20250918132451.png]]

AR5的OSPF路由表：
![[Pasted image 20250918132904.png]]
#### 划分Stub区域

将AR4和AR5的Area2区域配置成Stub区域，命令如下

```
system
ospf 1
area 2
stub
return
```

AR5的路由表：
![[Pasted image 20250918133232.png]]

可以看到AR5没有了OSPF引入的路由，取而代之的是默认路由

#### 划分完全Stub区域

在AR4上划分成完全Stub区域

```
system
ospf 1
area 2
stub no-summary
return
```

AR5的路由表：
![[Pasted image 20250918133653.png]]

#### 划分NSSA区域

在AR1和AR2上划分NSSA区域

```
system
ospf 1
area 1
nssa
return
```

AR1的路由表；
![[Pasted image 20250918134546.png]]

AR2的路由表：
![[Pasted image 20250918134559.png]]

AR3的路由表：
![[Pasted image 20250918134620.png]]
#### 划分完全NSSA区域

在AR2上配置完全NSSA区域

```
system
ospf 1
area 1
nssa no-summary
return 
```

AR1的路由表：
![[Pasted image 20250918134849.png]]


AR2的路由表：
![[Pasted image 20250918134909.png]]

