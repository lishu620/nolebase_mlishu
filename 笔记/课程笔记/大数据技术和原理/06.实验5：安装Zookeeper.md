将Zookeeper上传到节点1
![[Pasted image 20251019144436.png]]
## 配置环境变量
### 解压到moduels中
```
tar -zxvf zookeeper-3.4.6.tar.gz -C /opt/modules/
chown -R hadoop:hadoop /opt/modules/zookeeper-3.4.6
```

### 添加到环境

```
export ZOOKEEPER_HOME=/opt/modules/zookeeper-3.4.6
export PATH=$PATH:$JAVA_HOME/bin:$HADOOP_HOME/bin:$HADOOP_HOME/sbin:$JRE_HOME/bin:$ZOOKEEPER_HOME/bin:$ZOOKEEPER_HOME/conf
```

```
sudo scp /etc/profile root@gyy2:/etc/
sudo scp /etc/profile root@gyy3:/etc/
```

```
source /etc/profile
```

## 配置Zookeeper

在主节点执行：
```
cd /opt/modules/zookeeper-3.4.6/conf/
cp zoo_sample.cfg zoo.cfg
```

```
tickTime=2000
initLimit=10
syncLimit=5
dataDir=/opt/modules/apache-zookeeper-3.6.4-bin/data
dataLogDir=/opt/modules/apache-zookeeper-3.6.4-bin/log
clientPort=2181

server.1=gyy1:2888:3888
server.2=gyy2:2888:3888
server.3=gyy3:2888:3888
```

```
mkdir /opt/modules/zookeeper-3.4.6/data /opt/modules/zookeeper-3.4.6/log
```

```
chown -R hadoop:hadoop /opt/modules/zookeeper-3.4.6
```

```
scp -r /opt/modules/zookeeper-3.4.6/ hadoop@gyy2:/opt/modules/
scp -r /opt/modules/zookeeper-3.4.6/ hadoop@gyy3:/opt/modules/
```

```
# NN1
echo "1" > /opt/modules/zookeeper-3.4.6/data/myid

# DN1
echo "2" > /opt/modules/zookeeper-3.4.6/data/myid

# DN2
echo "3" > /opt/modules/zookeeper-3.4.6/data/myid
```

在三个机器上执行

```
zkServer.sh start
```

在三个机器上查看状态

```
zkServer.sh status
```

主节点提示：

```
[hadoop@gyy1 ~]$ zkServer.sh status
JMX enabled by default
Using config: /opt/modules/zookeeper-3.4.6/bin/../conf/zoo.cfg
Mode: follower
```

从节点提示：

```
[hadoop@gyy3 ~]$ zkServer.sh status
JMX enabled by default
Using config: /opt/modules/zookeeper-3.4.6/bin/../conf/zoo.cfg
Mode: leader
```










