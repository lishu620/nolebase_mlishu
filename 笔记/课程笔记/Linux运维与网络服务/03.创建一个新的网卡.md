## 提示

在进行之后的每一步配置前，建议创建系统还原点

首先将设备关机，在操作中选择生成快照
[[27ed919abf2a013acfb0b143eaef6ce8_MD5.jpeg|Open: Pasted image 20250916201603.png]]
![[27ed919abf2a013acfb0b143eaef6ce8_MD5.jpeg]]

输入快照名字和描述
[[0fd4e45f4b9820fffbd410806a38b3c2_MD5.jpeg|Open: Pasted image 20250916201655.png]]
![[0fd4e45f4b9820fffbd410806a38b3c2_MD5.jpeg]]

在快照管理中可以看到快照情况
[[984d32f1d7c6c70d9afc0b702b35aa86_MD5.jpeg|Open: Pasted image 20250916201735.png]]
![[984d32f1d7c6c70d9afc0b702b35aa86_MD5.jpeg]]

## 前置条件

[[01.安装Rhel10]]
## 添加网卡

在添加网卡前，查看一下当前网卡情况

```bash
nmcli device show
```

该命令可以查看当前网卡信息，比如现在上网网卡信息如下

```bash
[root@localhost ~]# nmcli device show
GENERAL.DEVICE:                         ens34
GENERAL.TYPE:                           ethernet
GENERAL.HWADDR:                         00:0C:29:93:EE:07
GENERAL.MTU:                            1500
GENERAL.STATE:                          100（已连接）
GENERAL.CONNECTION:                     ens34
GENERAL.CON-PATH:                       /org/freedesktop/NetworkManager/ActiveConnect>
WIRED-PROPERTIES.CARRIER:               开
IP4.ADDRESS[1]:                         192.168.34.119/24
IP4.GATEWAY:                            192.168.34.254
IP4.ROUTE[1]:                           dst = 192.168.34.0/24, nh = 0.0.0.0, mt = 100
IP4.ROUTE[2]:                           dst = 0.0.0.0/0, nh = 192.168.34.254, mt = 100
IP4.DNS[1]:                             114.114.114.114
IP4.DNS[2]:                             8.8.8.8
IP6.ADDRESS[1]:                         fe80::20c:29ff:fe93:ee07/64
IP6.GATEWAY:                            --
IP6.ROUTE[1]:                           dst = fe80::/64, nh = ::, mt = 1024

GENERAL.DEVICE:                         lo
GENERAL.TYPE:                           loopback
GENERAL.HWADDR:                         00:00:00:00:00:00
GENERAL.MTU:                            65536
GENERAL.STATE:                          100（连接（外部））
GENERAL.CONNECTION:                     lo
GENERAL.CON-PATH:                       /org/freedesktop/NetworkManager/ActiveConnect>
IP4.ADDRESS[1]:                         127.0.0.1/8
IP4.GATEWAY:                            --
IP6.ADDRESS[1]:                         ::1/128
IP6.GATEWAY:                            --
```

虚拟机通过网卡ens34连接

```bash
nmcli connection show ens34
```

以上命令可以查看网卡的详细信息

在主机管理中添加一张新的网卡

[[a9366bc4077d0dca5484d0d351bd092e_MD5.jpeg|Open: Pasted image 20250916202336.png]]
![[a9366bc4077d0dca5484d0d351bd092e_MD5.jpeg]]

添加一个新的网络适配器，选择另一个虚拟交换机（NetGroup0）

输入`nmcli device show`

可以查看新添加的网卡信息

```bash
GENERAL.DEVICE:                         ens37
GENERAL.TYPE:                           ethernet
GENERAL.HWADDR:                         00:0C:29:93:EE:11
GENERAL.MTU:                            1500
GENERAL.STATE:                          30（已断开）
GENERAL.CONNECTION:                     --
GENERAL.CON-PATH:                       --
WIRED-PROPERTIES.CARRIER:               开
IP4.GATEWAY:                            --
IP6.GATEWAY:                            --
```

可以看到新添加的网卡为`ens37`

添加一个新的连接：
```bash
nmcli connection add type ethernet ifname ens37 con-name ens37 ipv4.method manual ipv4.addresses 192.168.159.1/24 ipv4.gateway 192.168.159.254 ipv4.dns 8.8.8.8
```

如果成功的话会提示：`连接 "ens37" (c21cd6fa-babc-4d13-96a6-2a7833ffca0e) 已成功添加。`

启用这个连接：
```bash
nmcli connection up ens37
```

如果成功的话会提示：`连接已成功激活（D-Bus 活动路径：/org/freedesktop/NetworkManager/ActiveConnection/4）`

可以通过如下命令查看是否创建
```bash
nmcli device show ens37
```
